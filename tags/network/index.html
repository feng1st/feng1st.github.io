<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="generator" content="Hugo 0.25.1" />
    <meta name="description" content="">


    <title>Network :: 知不足而后进</title>
    <link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />
    <link href="/css/nucleus.css" rel="stylesheet">
    <link href="/css/font-awesome.min.css" rel="stylesheet">
    <link href="/css/hybrid.css" rel="stylesheet">
    <link href="/css/featherlight.min.css" rel="stylesheet">
    <link href="/css/horsey.css" rel="stylesheet">
    
    <link href="/css/theme.css" rel="stylesheet">
    
    
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <script src="/js/jquery-2.x.min.js"></script>
    <style type="text/css">
      :root #header + #content > #left > #rlblock_left {
        display:none !important;
      }
    </style>

    

    

  </head>
  <body class="" data-url="/tags/network/">
    <nav id="sidebar" class="">





<div class="highlightable">
  <div id="header-wrapper">
    <div id="header">
       
	 


    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fa fa-search"></i></label>
    <input data-search-input id="search-by" type="text" placeholder="Search...">
    <span data-search-clear=""><i class="fa fa-close"></i></span>
</div>
<script type="text/javascript" src="/js/lunr.min.js"></script>
<script type="text/javascript" src="/js/horsey.js"></script>
<script type="text/javascript">
    var baseurl = "https:\/\/feng1st.github.io\/";
</script>
<script type="text/javascript" src="/js/search.js"></script>

    
  </div>

  
    <ul class="topics">
        
            <li data-nav-id="/" class="dd-item">
            <a href="/"><i class="fa fa-fw fa-home"></i></a>
            </li>
        
        
        
          
          


 
  
    
    <li data-nav-id="/java/" class="dd-item 
        
        
        
        ">
      <a href="/java/">
        <span>Java</span>

        
        

          
            <i class="fa fa-angle-right fa-lg category-icon"></i>
          

        

        
      </a>
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/java/2017-06-10-java-nio/" class="dd-item
     
      ">
        <a href="/java/2017-06-10-java-nio/">
        <span>Java NIO摘要</span> 
        
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/java/2017-06-07-jvm-memory-gc/" class="dd-item
     
      ">
        <a href="/java/2017-06-07-jvm-memory-gc/">
        <span>Java内存模型和GC机制摘要</span> 
        
        </a></li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/network/" class="dd-item 
        
        
        
        ">
      <a href="/network/">
        <span>Network</span>

        
        

          
            <i class="fa fa-angle-right fa-lg category-icon"></i>
          

        

        
      </a>
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/network/2017-06-09-http-protocol/" class="dd-item
     
      ">
        <a href="/network/2017-06-09-http-protocol/">
        <span>HTTP协议摘要</span> 
        
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/network/2017-06-08-tcp-ip-protocol/" class="dd-item
     
      ">
        <a href="/network/2017-06-08-tcp-ip-protocol/">
        <span>TCP/IP协议摘要</span> 
        
        </a></li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/servlet/" class="dd-item 
        
        
        
        ">
      <a href="/servlet/">
        <span>Servlet</span>

        
        

          
            <i class="fa fa-angle-right fa-lg category-icon"></i>
          

        

        
      </a>
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/servlet/2017-06-14-tomcat/" class="dd-item
     
      ">
        <a href="/servlet/2017-06-14-tomcat/">
        <span>Tomcat笔记</span> 
        
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/servlet/2017-06-12-jetty/" class="dd-item
     
      ">
        <a href="/servlet/2017-06-12-jetty/">
        <span>Jetty笔记</span> 
        
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/servlet/2017-06-11-servlet/" class="dd-item
     
      ">
        <a href="/servlet/2017-06-11-servlet/">
        <span>Servlet笔记</span> 
        
        </a></li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/services/" class="dd-item 
        
        
        
        ">
      <a href="/services/">
        <span>Services</span>

        
        

          
            <i class="fa fa-angle-right fa-lg category-icon"></i>
          

        

        
      </a>
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/services/2017-06-23-microservices/" class="dd-item
     
      ">
        <a href="/services/2017-06-23-microservices/">
        <span>微服务架构摘要</span> 
        
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/services/2017-06-19-microservices/" class="dd-item
     
      ">
        <a href="/services/2017-06-19-microservices/">
        <span>微服务架构笔记</span> 
        
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/services/2017-06-18-soa/" class="dd-item
     
      ">
        <a href="/services/2017-06-18-soa/">
        <span>面向服务架构笔记</span> 
        
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/services/2017-06-17-high-concurrency/" class="dd-item
     
      ">
        <a href="/services/2017-06-17-high-concurrency/">
        <span>高并发解决思路</span> 
        
        </a></li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/spring/" class="dd-item 
        
        
        
        ">
      <a href="/spring/">
        <span>Spring</span>

        
        

          
            <i class="fa fa-angle-right fa-lg category-icon"></i>
          

        

        
      </a>
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/spring/2017-06-26-spring-rest/" class="dd-item
     
      ">
        <a href="/spring/2017-06-26-spring-rest/">
        <span>Spring实现RESTful Service笔记</span> 
        
        </a></li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/spring/2017-06-25-spring-dispatcher-servlet/" class="dd-item
     
      ">
        <a href="/spring/2017-06-25-spring-dispatcher-servlet/">
        <span>Spring DispatcherServlet相关知识点</span> 
        
        </a></li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/docker/" class="dd-item 
        
        
        
        ">
      <a href="/docker/">
        <span>Docker</span>

        
        

          
            <i class="fa fa-angle-right fa-lg category-icon"></i>
          

        

        
      </a>
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/docker/2017-06-27-dubbo-in-docker/" class="dd-item
     
      ">
        <a href="/docker/2017-06-27-dubbo-in-docker/">
        <span>Docker容器运行dubbo应用</span> 
        
        </a></li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/utilities/" class="dd-item 
        
        
        
        ">
      <a href="/utilities/">
        <span>Utilities</span>

        
        

          
            <i class="fa fa-angle-right fa-lg category-icon"></i>
          

        

        
      </a>
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/utilities/2017-06-22-plantuml/" class="dd-item
     
      ">
        <a href="/utilities/2017-06-22-plantuml/">
        <span>工具推荐：PlantUML，文本转UML图工具</span> 
        
        </a></li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
        

        
    </ul>
    
     
    <section id="footer">
      
    </section>
  </div>
</nav>




        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
        
          <div id="top-bar">
            

            <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                <span id="sidebar-toggle-span">
                  <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                    <i class="fa fa-bars"></i>
                  </a>
                </span>
                <span id="toc-menu"><i class="fa fa-list-alt"></i></span>
                <span class="links">
                

 Network

   
                </span>
            </div>
            <div class="progress">
    <div class="wrapper">

    </div>
</div>

          </div>
        
        
        <div id="body-inner">
          
            <h1>Network</h1>
          






<footer class=" footline" >
	
</footer>



	

	<div class="extra-pagination inner">
	<nav class="pagination" role="navigation">
	
	<span class="page-number">Page 1 on 1</span>
	
</nav>

	</div>

	
	   <article class="post java">
    <header class="post-header">
        <h2 class="post-title"><a href="/java/2017-06-10-java-nio/">Java NIO摘要</a></h2>
    </header>
    <section class="post-excerpt">
        <p>比较经典和精简的教程，先直接发链接： http://tutorials.jenkov.com/java-nio/
NIO的实现不复杂，但是其体现了一个统一、可伸缩的面向数据/信息流的设计思想 例如，换用消息队列，就可以扩展到分布式系统里去
一些思考点  Channel和Stream有什么不同？  Channel双向，Stream一般单向 Channel支持异步 Channel搭配Buffer使用  ServerSocketChannel和SocketChannel有什么不同？  SocketChannel用于单个连接 ServerSocketChannel用于监听端口，对每一个接受的连接创建一个SocketChannel  FileChannel.transferTo(&hellip;, SocketChannel)有什么需要注意的？  SocketChannel非阻塞且发送缓冲已满，可能只传输部分  SocketChannel的blocking和non-blocking模式有什么不同？  相对于阻塞，connect()直接返回，需要后继调用finishConnect()判断成功 write()/read()可能未实际读写就返回  ServerSocketChannel的blocking和non-blocking模式有什么不同？  相对于阻塞，accept()直接返回，如没有接受连接，返回null write()/read()可能未实际读写就返回  Blocking模式Socket有什么问题？  一般会用一个线程处理一个连接，所以支撑的连接数非常有限 如果使用连接池复用活动连接，一些慢速或者非活动连接可能会占满连接池  Non-blocking模式Socket有哪些挑战？  读到的字节流拆分Message：文章提到了TLV，但最好用长度+内容+校验构成  长度：TLV中的L 内容：类型是包含在这里面的，比如protobuf协议 校验：用于验证数据错误，或者网络错误，通知重传  读写的Message要有长度限制，否则一个伪造的字节流就能把服务器撑垮  一般会定义一种特定Message，专门用来拆分大的其它Message，长度和校验部分机制不变，内容部分构成如下  总段数 本段序号 本段内容   发送方不能把所有的Channel都注册到Selector，因为Selector.select()时，可能大部分Channel都可写，全部返回，性能低下  当本Channel对应缓冲区有待发送数据时，才注册到Selector 当缓冲区数据发送完毕时，从Selector取消注册   Selector有哪两种底层实现？  Reactor：轮询Channel对应底层IO句柄。当连接数过多时，性能低下。这个可以算是多路复用，因为select()时还是有等待的过程 e-poll：注册回调函数，只有当有对应事件发生时，才通知Selector。这个算是真正的异步。Linux直接支持  阻塞/非阻塞，同步/异步  阻塞：调用io函数会一直等待，比如System.in.read() 非阻塞：调用io函数，只读写可以读写的部分，然后立刻返回，比如NIO 同步：用等待或者轮询的方式拿到结果，比如NIO 异步：当时不用拿到结果，事后再获取结果，或者等到结果通知。使用Future或者Callback，比如AsynchronousFileChannel  额外提一下Node. <a class="read-more" href="/java/2017-06-10-java-nio/">&raquo;</a></p>
    </section>
    <footer class=" footline" >
         
        

        
          
            
                <a class="label label-default" href="https://feng1st.github.io/tags/java/">Java</a>
            
                <a class="label label-default" href="https://feng1st.github.io/tags/network/">Network</a>
            
                <a class="label label-default" href="https://feng1st.github.io/tags/nio/">NIO</a>
            
        

    </footer>
</article>




	
	   <article class="post network">
    <header class="post-header">
        <h2 class="post-title"><a href="/network/2017-06-09-http-protocol/">HTTP协议摘要</a></h2>
    </header>
    <section class="post-excerpt">
        <p>HTTP协议概述  基于服务器/客户端，请求/响应 无连接（1.1开始支持长连接Web Socket） 无状态（需要依赖会话维持状态） 应用层协议，基于TCP  URL http://host:port/res_uri.html?param=...
 协议：如http, https, ftp等 用户名/密码：部分协议例如ftp支持用户名密码 域名和端口：要访问服务器的域名和端口，不同协议有自己的默认端口 访问资源：要访问资源的路径和参数  请求 GET /index.html HTTP/1.0&lt;CRLF&gt; Host:www.sina.com.cn&lt;CRLF&gt; Accept-Encoding:gzip, deflate&lt;CRLF&gt; User-Agent:Mozilla/4.0(compatible;MSIE6.0;Windows NT 5.0)&lt;CRLF&gt; Connection:Keep-Alive&lt;CRLF&gt; &lt;CRLF&gt; {Optional Content Body}   起始行：Method Request-URI HTTP-Version  请求方法  GET 请求Request-URI所标识的资源 POST 在资源后附加新的数据 HEAD 请求获取资源的响应消息报头 PUT 请求服务器存储一个资源 DELETE 请求删除资源 TRACE 请求服务器回送收到的请求信息，用于诊断测试 CONNECT 保留字 OPTIONS 请求查询服务器性能   消息报头：（见后） 消息主体：可选，对POST请求，消息主体为POST的数据  响应 HTTP/1.1 200 OK&lt;CRLF&gt; Content-Length:123&lt;CRLF&gt; Content-Type:text/html;charset=utf-8&lt;CRLF&gt; ...&lt;CRLF&gt; &lt;CRLF&gt; {Optional Content Body}   起始行：HTTP-Version Status-Code Reason-Phrase  状态码  1xx：指示信息&ndash;消息已接收，继续处理 2xx：成功&ndash;消息已被成功接收、理解、接受  200 OK  3xx：重定向&ndash;要完成请求必须进行进一步的操作 4xx：客户端错误&ndash;请求有语法错误或者请求无法实现  400 Bad Request 401 Unauthorized 403 Forbidden 404 Not Found  5xx：服务端错误&ndash;服务端无法实现请求  500 Internal Server Error 503 Server Unavailable    消息报头：（见下） 消息主体：可选，返回的内容  消息报头  常见请求报文头信息 <a class="read-more" href="/network/2017-06-09-http-protocol/">&raquo;</a></p>
    </section>
    <footer class=" footline" >
         
        

        
          
            
                <a class="label label-default" href="https://feng1st.github.io/tags/network/">Network</a>
            
                <a class="label label-default" href="https://feng1st.github.io/tags/http/">HTTP</a>
            
        

    </footer>
</article>




	
	   <article class="post network">
    <header class="post-header">
        <h2 class="post-title"><a href="/network/2017-06-08-tcp-ip-protocol/">TCP/IP协议摘要</a></h2>
    </header>
    <section class="post-excerpt">
        <p> 协议分层  应用层 Application  对应OSI协议Application、Presentation、Session三层 常见上层协议：HTTP、FTP、SMTP、TELNET  传输层 Transport  对应OSI协议Transport层 协议：  TCP：（见下） UDP：不超时重传、不错误重传、不保证顺序   网络层 Internet  对应OSI协议Network层 协议：  IP：（见下） ARP：IP地址到MAC地址转换 DARP：（略） ICMP：发生错误时，错误信息封包传给主机；IP重定向报文；路由发现报文  ping traceroute  利用IP协议的TTL实现 利用主机不可达和端口不可达区分     网络接口层 Network Interface  对应OSI协议Data Link、Physical两层 附加以太网部首   IP协议  附加IP部首  TTL，生存周期，每路由一层减1，为0时丢弃  实现traceroute   路由顺序：  TTL为0时丢弃 匹配主机 匹配同子网路由器 匹配同网号路由器 匹配默认路由器  不保证可达，需配合ICMP由上层实现可靠性  TCP协议 流量控制的思想可以用于上层应用的开发
 附加TCP部首 可靠协议  合理分块 超时重发 校验和校验 发送确认 组装时排序 滑动窗口流控  建立连接，三次握手： sequenceDiagram Client-Server: SYN Server--Client: ACK Client--Server: ACK  断开连接，四次握手： sequenceDiagram Client-Server: FIN Server--Client: ACK Server-Client: FIN Client--Server: ACK  流量控制  延迟发送  捎带ACK：延迟发送ACK Nagle算法：延迟发送数据  滑动窗口 rwnd：接收方缓冲区 拥塞窗口 cwnd：探测带宽上限  慢启动阶段（未超过门限 ssthresh）  cwnd *= 2  拥塞避免阶段（超过门限）  cwnd += 1    超时重传  超时时间调整：简单的说，是一个涉及旧超时时间、新传输时间、经验系数、方差的函数 拥塞：某报文超时需要重传  ssthresh /= 2 cwnd = 1 进入慢启动阶段  快速重传：当收到3个重复ACK时（=3个，丢包是大概率事件）  ssthresh /= 2 cwnd = ssthresh 进入拥塞避免阶段  快速恢复：（略）  其它计时器  坚持定时器：双方滑动窗口为0时的试探间隔，避免互相等待死锁 保活定时器：判断保持或断开半开放连接 2MSL定时器：端口可再次使用的计时器，在此期间，服务端可以重启而不报端口占用错误，但不可以建立连接    <a class="read-more" href="/network/2017-06-08-tcp-ip-protocol/">&raquo;</a></p>
    </section>
    <footer class=" footline" >
         
        

        
          
            
                <a class="label label-default" href="https://feng1st.github.io/tags/network/">Network</a>
            
                <a class="label label-default" href="https://feng1st.github.io/tags/tcp-ip/">TCP-IP</a>
            
        

    </footer>
</article>




	

	<div style="margin-bottom:2rem"></div>

	<nav class="pagination" role="navigation">
	
	<span class="page-number">Page 1 on 1</span>
	
</nav>




      </div>
    </div>

    
 
    

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
        
        


        
        
            <a class="nav nav-next" href="/java/" title="Java" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
        
    </div>

    </section>
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/js/clipboard.min.js"></script>
    <script src="/js/featherlight.min.js"></script>
    <script src="/js/html5shiv-printshiv.min.js"></script>
    <script src="/js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/js/modernizr.custom.71422.js"></script>
    <script src="/js/learn.js"></script>
    <script src="/js/hugo-learn.js"></script>

    
    <link href="/mermaid/mermaid.css" type="text/css" rel="stylesheet"/>
    <script src="/mermaid/mermaid.js"></script>
    <script>mermaid.initialize({startOnLoad:true});</script>
    

    

  </body>
</html>
